//=============================================================================
// File    : DataChange.js
// Author  : Eric Woodruff  (Eric@EWoodruff.us)
// Updated : Fri 09/17/2013
var BP_bOnBeforeUnloadFired = false;
function BP_funCheckForChanges(a){var b,c,d,f,g,h;var i,j,k,l,m;var n=document.forms[BP_strFormName];var o=n.elements.length;var p=(typeof(a)=="undefined");var q=document.getElementsByName("BP_bIsDirty")[0];if(p==true&&BP_bOnBeforeUnloadFired==true)return;var r=(q.value=="true");b="";i=document.getElementById("__EVENTTARGET");if(i==null||typeof(i)=="undefined"||i.value==""){if(typeof(document.activeElement)!="undefined"){i=document.activeElement;b=i.id;}}else b=i.value;if(b==""&&i!=null&&typeof(i)!="undefined"){if(i.tagName=="A"&&i.href.indexOf("__doPostBack")!=-1)return;if(typeof(i.parentElement)!="undefined")b=i.parentElement.id;}if(b!=""){f=BP_arrBypassList.length;for(c=0;c<f;c++)if(b==BP_arrBypassList[c])p=false;else{g=b.length-BP_arrBypassList[c].length;if(g>=0)if(b.substr(g)==BP_arrBypassList[c])p=false;}}f=BP_arrSkipList.length;for(c=0;!r&&c<o;c++){i=n.elements[c];for(h=0;h<f;h++){if(i.id==BP_arrSkipList[h])break;g=i.id.length-BP_arrSkipList[h].length;if(g>=0)if(i.id.substr(g)==BP_arrSkipList[h])break;}if(h<f)continue;if(i.type=="text"||i.tagName=="TEXTAREA"){if(i.value!=i.defaultValue)r=true;}else if(i.type=="checkbox"||i.type=="radio"){if(i.checked!=i.defaultChecked)r=true;}else if(i.tagName=="SELECT"){j=i.options;d=j.length;l=m=0;for(h=0;h<d;h++){k=j[h];if(k.defaultSelected)l=h;if(k.selected)m=h;}if(l!=m)r=true;}}if(r){q.value="true";if(p){event.returnValue=BP_strDataLossMsg;BP_bOnBeforeUnloadFired=true;window.setTimeout("BP_funClearIfCancelled()",1000);}}}function BP_funClearIfCancelled(){var i;BP_bOnBeforeUnloadFired=false;i=document.getElementById("__EVENTTARGET");if(i!=null&&typeof(i)!="undefined")i.value="";}document.forms[BP_strFormName].BP_RealOnSubmit=document.forms[BP_strFormName].submit;document.forms[BP_strFormName].submit=function(){BP_funCheckForChanges(true);try{document.forms[BP_strFormName].BP_RealOnSubmit();}catch(e){}};window.onbeforeunload=function(){BP_funCheckForChanges();};